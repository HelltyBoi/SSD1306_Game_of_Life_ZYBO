/******************************************************************************
*
* Copyright (C) 2010 - 2014 Xilinx, Inc.  All rights reserved.
*
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to deal
* in the Software without restriction, including without limitation the rights
* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
*
* The above copyright notice and this permission notice shall be included in
* all copies or substantial portions of the Software.
*
* Use of the Software is limited solely to applications:
* (a) running on a Xilinx device, or
* (b) that interact with a Xilinx device through a bus or interconnect.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
* XILINX  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF
* OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
* SOFTWARE.
*
* Except as contained in this notice, the name of the Xilinx shall not be used
* in advertising or otherwise to promote the sale, use or other dealings in
* this Software without prior written authorization from Xilinx.
*
******************************************************************************/
/*****************************************************************************/
/**
* @file xiicps_polled_master_example.c
*
* A design example of using the device in polled mode as master.
*
* The example uses buffer size 132. Please set the send buffer of the
* Aardvark device to be continuous 64 bytes from 0x00 to 0x3F.
 *
 * <pre> MODIFICATION HISTORY:
 *
 * Ver   Who Date     Changes
 * ----- --- -------- -----------------------------------------------
 * 1.00a jz  01/30/10 First release
 *
 * </pre>
 *
 ****************************************************************************/

/***************************** Include Files **********************************/
#include "xparameters.h"
#include "xiicps.h"
#include "xil_printf.h"
#include "sleep.h"

#define SCROLL 1

/************************** Constant Definitions ******************************/

/*
 * The following constants map to the XPAR parameters created in the
 * xparameters.h file. They are defined here such that a user can easily
 * change all the needed parameters in one place.
 */
#define IIC_DEVICE_ID		XPAR_XIICPS_0_DEVICE_ID

/*
 * The slave address to send to and receive from.
 */
#define IIC_SLAVE_ADDR		0x3C
#define IIC_SCLK_RATE		100000

/*
 * The following constant controls the length of the buffers to be sent
 * and received with the IIC.
 */
#define TEST_BUFFER_SIZE	23

/**************************** Type Definitions ********************************/


/************************** Function Prototypes *******************************/

int IicPsMasterPolledExample(u16 DeviceId);
/************************** Variable Definitions ******************************/

XIicPs Iic;		/**< Instance of the IIC Device */

/*
 * The following buffers are used in this example to send and receive data
 * with the IIC.
 */
u8 SendBuffer[]={0xAE,
				0xDA,
				0x80,
				0xA8,
				0x3F,
				0xD3,
				0x00,
				0x40,
				0x8D,
				0x14,
				0xA1,
				0xC8,
				0xDA,
				0x12,
				0x81,
				0xCF,
				0xD9,
				0xF1,
				0xDB,
				0x40,
				0xA4,
				0xA6,

				//0x2e,
				//0x26,//horizontLR
				//0x00,
				//0x00,
				//0x00,
				//0x07,
				//0x00,
				//0xFF,
				//0x2f,
				//0x27,//horizontRT
				//0x00,
				//0x04,
				//0x00,
				//0x05,
				//0x00,
				//0xFF,
				//0x2f,

				//0x40,

				//0x00,
				0x21,//mem addressing
				0x00,
				0x7f,
				0x22,
				0x00,
				0x07,
				0x20,
				0x00,
				0x40,
				0xAF};    /**< Buffer for Transmitting Data */



	//dampa
	/*u8 ramBuffer[]={0x40,

			0x00,0x00,0x00,0x00,0xFC,0xFC,0xFE,0xDE,0x9E,0x8E,0x8E,0x3E,0x3E,0x3C,0x00,0x00,
			0x00,0x00,0x3C,0xFC,0xFE,0xFE,0x1E,0x0E,0x0E,0x1E,0xFE,0xFE,0xFC,0xF0,0x00,0x00,
			0x00,0x00,0x00,0xFE,0xFE,0xFF,0xC3,0xC3,0xC7,0xC7,0xC7,0xCF,0xCF,0x0F,0x00,0x00,
			0x0E,0x0E,0xFE,0xFE,0xFE,0x1C,0x1C,0x1C,0x1C,0x1C,0x1C,0x00,0xFF,0xFF,0xFF,0xFF,
			0xFF,0xF8,0xC0,0x00,0x00,0x00,0x00,0x7E,0xFE,0xFE,0xFE,0xFC,0xE0,0x80,0x00,0x00,
			0xE0,0xF0,0xF0,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

			0x00,0x00,0x00,0x70,0x71,0x79,0x7B,0x7B,0x7B,0x77,0x7F,0x7F,0x7F,0x7E,0x00,0x00,
			0x00,0x00,0x00,0x7F,0xFF,0xFF,0xFF,0x0F,0x0F,0x1F,0x3F,0x3F,0x3F,0x79,0xF8,0xF0,
			0xE0,0xE0,0x00,0x0F,0x3F,0x3F,0x3F,0x39,0x39,0x39,0x39,0x39,0x01,0x00,0x00,0x00,
			0x00,0x00,0x3F,0xFF,0xFF,0xF0,0x00,0x00,0x00,0x00,0xE0,0xF0,0xFF,0xFF,0x3F,0x1C,
			0x1F,0x3F,0x7F,0x7E,0x78,0x00,0x00,0x00,0xFF,0xFF,0xFF,0x07,0x1F,0x3F,0xFF,0xFC,
			0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x0F,0x0F,0x0F,0x0F,0x00,0x00,0x00,0x00,0x00,0x80,0xF9,0xF9,
			0xF9,0xBD,0xBC,0x9C,0x9C,0x9C,0xBC,0xFC,0xFC,0xF8,0xE0,0x00,0x00,0x00,0xE0,0xE0,
			0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xC0,0xC0,0xC0,0x80,0x00,0x00,0x00,0x07,0x9F,0xFF,
			0xFF,0xFE,0xFF,0xFF,0xFF,0xF0,0xF0,0x70,0x01,0x01,0x01,0xF0,0xF0,0xF0,0x80,0xC0,
			0xE0,0xF8,0xFC,0x7C,0x3C,0x00,0x00,0x00,0x00,0xFC,0xFC,0xFC,0xFC,0xF8,0xE0,0x00,
			0x00,0x00,0x00,0x00,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,
			0x07,0x07,0x07,0x07,0x0F,0x0F,0x1F,0xFF,0xFF,0xFB,0xF9,0xF0,0xE0,0x00,0x0F,0x1F,
			0x1F,0x3E,0x3C,0x3C,0x38,0x39,0x3B,0x3F,0x3F,0x3F,0x00,0x00,0x00,0x00,0x3F,0xFF,
			0xFF,0xFB,0xC1,0xC0,0xC0,0xC0,0x80,0x80,0x80,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xBF,
			0x3F,0x3B,0x78,0x78,0xF0,0xF0,0xE0,0xE0,0xC0,0x1F,0xFF,0xFF,0xE3,0xEF,0xFF,0xFF,
			0xFE,0xF8,0xE0,0x00,0x03,0x07,0x0F,0x0F,0x1F,0x3E,0xFC,0xF9,0xF1,0xC1,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,
			0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xC0,0xC0,0xC1,0x01,0x01,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0xF0,0xF0,0xF0,0xF0,0x80,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xE0,0xE0,0xE0,0xC0,0xC0,0x80,0x00,
			0x01,0x01,0x01,0x03,0x03,0x03,0x03,0x03,0x03,0x00,0x00,0x00,0x03,0x87,0x87,0x87,
			0x80,0x00,0x00,0x00,0x00,0x01,0x01,0x01,0x01,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,
			0xC1,0xC1,0xC1,0xC0,0xC0,0x00,0x0E,0x0E,0x0E,0x0F,0x0F,0x0F,0x07,0x03,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1F,0x7F,0xFF,0xF9,0xC0,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0xC1,0xFF,0xFF,0xFF,0x00,0x00,
			0x00,0x00,0x00,0x00,0x80,0xE0,0xFC,0xFE,0x7F,0x0F,0x0F,0x0F,0x1F,0x3F,0x7E,0xF8,
			0xF8,0xE0,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x0F,0xFF,0xFF,0xFF,0x87,0x1F,0x3F,
			0x3E,0x7C,0xF8,0xF0,0xE0,0xC0,0x80,0x80,0xE0,0xF0,0xF8,0xFE,0x3F,0x1F,0x7F,0xFF,
			0xFF,0xE0,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0x79,0x79,0x79,0x39,
			0x3D,0x3D,0x3F,0x1F,0x1F,0x0F,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xE0,0xF8,0xFF,
			0xFF,0xFF,0xFF,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xE0,0xE0,0xF0,
			0xF0,0xF8,0x78,0x78,0x3C,0x3C,0x1C,0x1E,0x1E,0x0F,0x0F,0x07,0x03,0x01,0x00,0x00,
			0x80,0xC0,0xFE,0xFE,0x3F,0x0F,0x0F,0x0E,0x0E,0x0E,0x0E,0x0E,0x0E,0x0E,0x0E,0x0F,
			0x0F,0xFF,0xFF,0xFC,0x80,0x00,0x00,0x00,0x00,0x00,0x01,0x03,0xFF,0xFF,0xFF,0x00,
			0x00,0x00,0x00,0x03,0x07,0x07,0x0F,0x0F,0x0F,0x0F,0x01,0x00,0x00,0x00,0x00,0x01,
			0x07,0xFF,0xFF,0xFE,0x00,0x00,0x00,0x00,0xFE,0xFF,0xFF,0x07,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xF0,0xF0,0xF8,0xFC,0xFF,0xDF,0xCF,0xC3,0xC1,
			0xC0,0xFF,0xFF,0xFF,0xF0,0xE0,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x03,0x03,0x01,0x01,0x01,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0E,0x0E,0x0E,0x0E,
			0x0F,0x0F,0x07,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x03,0x03,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x03,0x03,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x03,0x03,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x0F,0x0F,0x0F,0x07,0x01,0x01,0x01,0x01,0x01,0x01,0x01,
			0x01,0x03,0x03,0x03,0x0F,0x0F,0x0F,0x0E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00


	};*/



	u8 ramBuffer[]={0x40,
			//HAPPY BDAY
			/*0x0C,0x06,0x07,0x1E,0xF8,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xE0,0x60,0x00,0x00,0x00,0x80,
			0xE0,0x60,0x00,0x00,0x00,0x80,0xC0,0x60,0x60,0xC0,0x00,0x00,0x00,0x00,0x80,0xE0,
			0x60,0x20,0x20,0xA0,0xE0,0x60,0x00,0x80,0xE0,0x60,0x20,0x20,0xA0,0xE0,0x60,0x00,
			0x00,0x20,0xE0,0xC0,0x80,0xC0,0x40,0x20,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xF0,0xF8,0x3C,0x0F,0x06,0x0C,0x18,

			0x80,0x80,0x00,0x00,0x00,0x07,0x05,0x04,0x06,0x06,0x06,0x06,0x06,0x66,0xFE,0xBC,
			0x8C,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x07,0x03,0x01,0x01,0x01,0x05,0x07,
			0x03,0x00,0x04,0x06,0x03,0x01,0x01,0x01,0x01,0x07,0x06,0x00,0x00,0x04,0x07,0x03,
			0x01,0x01,0x01,0x01,0x01,0x00,0x04,0x07,0x03,0x01,0x01,0x01,0x01,0x01,0x00,0x00,
			0x00,0x00,0x04,0x07,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0xFE,
			0xF6,0x66,0x06,0x06,0x06,0x06,0x04,0x04,0x03,0x0F,0x00,0x00,0x40,0x00,0x80,0xA0,

			0x1F,0x1F,0xCC,0x00,0x03,0x11,0x10,0x00,0x00,0x40,0xE0,0x20,0x30,0x38,0x18,0x0F,
			0x0F,0x03,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,
			0xE0,0x60,0x20,0x20,0xA0,0xE0,0x60,0x00,0x00,0x80,0xE0,0x60,0x20,0x20,0x20,0xE0,
			0xC0,0x00,0x00,0x00,0x80,0xC0,0x60,0x60,0xC0,0x00,0x00,0x00,0x00,0x00,0x20,0xE0,
			0xC0,0x80,0xC0,0x40,0x20,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x03,0x07,0x1C,
			0x3C,0x38,0x30,0x20,0x60,0xC0,0x40,0x00,0x00,0x20,0x02,0x12,0x50,0x1F,0x1F,0x3F,

			0xC0,0x80,0x00,0x00,0x00,0x00,0x00,0xC0,0xC0,0xC0,0x87,0xFF,0xFC,0xF0,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x07,
			0x07,0x05,0x05,0x05,0x06,0x02,0x00,0x00,0x04,0x07,0x07,0x04,0x04,0x04,0x06,0x03,
			0x01,0x04,0x06,0x03,0x01,0x01,0x01,0x01,0x07,0x06,0x00,0x00,0x00,0x00,0x00,0x04,
			0x07,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0xF0,0xF8,0xFC,0x87,0x83,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0xE0,0x70,

			0x01,0x03,0x03,0x04,0x0C,0x04,0x04,0x07,0x07,0x01,0x03,0x03,0x03,0x03,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xC0,0xC0,0x00,
			0x00,0x00,0x00,0x00,0x00,0xC0,0xC0,0x00,0x20,0x70,0xE0,0x80,0x00,0x00,0x00,0x80,
			0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0xC0,0xC0,0xC0,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x03,0x03,0x03,0x03,0x03,0x1F,0x0C,0x0C,0x04,0x06,0x02,0x03,0x01,0x00,0x00,

			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xF0,0xFE,0xFF,0xCF,0xC1,0xC0,
			0x80,0x80,0x00,0x00,0x00,0x00,0x03,0x03,0x00,0x00,0x00,0x00,0x80,0xC0,0xC1,0xC1,
			0xC3,0xC3,0xC3,0x83,0x83,0x87,0x07,0x07,0x07,0x06,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x04,0x06,0x06,0x0E,0x0E,0x0E,0x0E,0x0E,0x0E,0x0E,0x0E,0x0E,0x0E,0x0E,0x06,
			0x06,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x18,0x18,0x18,0x18,0xD8,0xF8,
			0xFF,0xFF,0x3F,0x1F,0x08,0x08,0x88,0xF8,0xF8,0xF8,0x38,0x08,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xF0,0xFE,0x7F,0x0F,0x01,0x00,0x00,0x01,0x01,
			0x03,0x03,0x07,0x0F,0x06,0x02,0x00,0x00,0x00,0x60,0x70,0x70,0xE0,0xE0,0xE0,0xC1,
			0xC1,0xC1,0xC1,0x83,0x83,0x87,0x07,0x03,0x01,0x00,0x40,0x60,0x60,0x60,0xE0,0xE0,
			0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0x60,0x60,0x60,
			0x60,0x20,0x00,0x00,0x00,0x00,0x80,0x80,0xC0,0xE0,0xF0,0x78,0x3E,0x1F,0x0F,0x07,
			0x01,0x00,0x00,0x80,0xE0,0xFC,0xFF,0x7F,0x1F,0x03,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x04,0x07,0x07,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,
			0x01,0x01,0x03,0x03,0x03,0x07,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x06,0x07,0x07,0x03,0x01,0x01,0x00,0x00,0x00,0x00,0x02,0x03,
			0x03,0x03,0x03,0x03,0x03,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00*/


			//HAPPY BIRTHDAY katakana
			/*0x0C,0x06,0x07,0x1E,0xF8,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xE0,0x60,0x00,0x00,0x00,0x80,0xE0,0x60,0x00,
			0x00,0x00,0x80,0xC0,0x60,0x60,0xC0,0x00,0x00,0x00,0x00,0x80,0xE0,0x60,0x20,0x20,
			0xA0,0xE0,0x60,0x00,0x80,0xE0,0x60,0x20,0x20,0xA0,0xE0,0x60,0x00,0x00,0x20,0xE0,
			0xC0,0x80,0xC0,0x40,0x20,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xF0,0xF8,0x3C,0x0F,0x06,0x0C,0x18,

			0x80,0x80,0x00,0x00,0x00,0x07,0x05,0x04,0x06,0x06,0x06,0x06,0x06,0x66,0xFE,0xBC,
			0x8C,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x04,0x07,0x03,0x01,0x01,0x01,0x05,0x07,0x03,0x00,0x04,
			0x06,0x03,0x01,0x01,0x01,0x01,0x07,0x06,0x00,0x00,0x04,0x07,0x03,0x01,0x01,0x01,
			0x01,0x01,0x00,0x04,0x07,0x03,0x01,0x01,0x01,0x01,0x01,0x00,0x00,0x00,0x00,0x04,
			0x07,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0xFE,
			0xF6,0x66,0x06,0x06,0x06,0x06,0x04,0x04,0x03,0x0F,0x00,0x00,0x40,0x00,0x80,0xA0,

			0x1F,0x1F,0xCC,0x00,0x03,0x11,0x10,0x00,0x00,0x40,0xE0,0x20,0x30,0x38,0x18,0x0F,
			0x0F,0x03,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0xF0,0xB0,0x90,0x90,0x90,0xD0,
			0x70,0x30,0x00,0x00,0xC0,0xF0,0x30,0x00,0x00,0x00,0xC0,0xF0,0xB0,0x90,0x90,0x90,
			0xD0,0xF0,0x30,0x00,0x10,0x10,0xD0,0xF0,0x30,0x10,0x10,0x10,0x00,0x00,0xC0,0xF0,
			0xB0,0x80,0x80,0x80,0xC0,0xF0,0x30,0x00,0x00,0x00,0xC0,0xF0,0x30,0x10,0x10,0x10,
			0x10,0xF0,0xF0,0x00,0x80,0xC0,0xE0,0x70,0xF0,0xF0,0x00,0x00,0x00,0x00,0x10,0x70,
			0xF0,0xC0,0x60,0x30,0x10,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x03,0x07,0x1C,
			0x3C,0x38,0x30,0x20,0x60,0xC0,0x40,0x00,0x00,0x20,0x02,0x12,0x50,0x1F,0x1F,0x3F,

			0xC0,0x80,0x00,0x00,0x00,0x00,0x00,0xC0,0xC0,0xC0,0x87,0xFF,0xFC,0xF0,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x03,0x03,0x02,0x02,0x02,0x02,0x03,
			0x01,0x00,0x00,0x02,0x03,0x01,0x00,0x00,0x00,0x02,0x03,0x01,0x00,0x01,0x03,0x03,
			0x02,0x02,0x00,0x00,0x00,0x02,0x03,0x01,0x00,0x00,0x00,0x00,0x00,0x02,0x03,0x01,
			0x00,0x00,0x00,0x02,0x03,0x01,0x00,0x00,0x00,0x02,0x03,0x03,0x02,0x02,0x02,0x02,
			0x03,0x01,0x02,0x03,0x03,0x01,0x01,0x01,0x03,0x03,0x03,0x00,0x00,0x00,0x00,0x02,
			0x03,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0xF0,0xF8,0xFC,0x87,0x83,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0xE0,0x70,

			0x01,0x03,0x03,0x04,0x0C,0x04,0x04,0x07,0x07,0x01,0x03,0x03,0x03,0x03,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xC0,0xC0,0x00,0x00,0x00,
			0x00,0x00,0x00,0xC0,0xC0,0x00,0x20,0x70,0xE0,0x80,0x00,0x00,0x00,0x80,0x80,0x80,
			0x80,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,
			0xC0,0xC0,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x03,0x03,0x03,0x03,0x03,0x1F,0x0C,0x0C,0x04,0x06,0x02,0x03,0x01,0x00,0x00,

			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xF0,0xFE,0xFF,0xCF,0xC1,0xC0,0x80,0x80,
			0x00,0x00,0x00,0x00,0x03,0x03,0x00,0x00,0x00,0x00,0x80,0xC0,0xC1,0xC1,0xC3,0xC3,
			0xC3,0x83,0x83,0x87,0x07,0x07,0x07,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,
			0x06,0x06,0x0E,0x0E,0x0E,0x0E,0x0E,0x0E,0x0E,0x0E,0x0E,0x0E,0x0E,0x06,0x06,0x06,
			0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x18,0x18,0x18,0x18,0xD8,0xF8,0xFF,0xFF,
			0x3F,0x1F,0x08,0x08,0x88,0xF8,0xF8,0xF8,0x38,0x08,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x80,0xF0,0xFE,0x7F,0x0F,0x01,0x00,0x00,0x01,0x01,0x03,0x03,
			0x07,0x0F,0x06,0x02,0x00,0x00,0x00,0x60,0x70,0x70,0xE0,0xE0,0xE0,0xC1,0xC1,0xC1,
			0xC1,0x83,0x83,0x87,0x07,0x03,0x01,0x00,0x40,0x60,0x60,0x60,0xE0,0xE0,0xE0,0xE0,
			0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0xE0,0x60,0x60,0x60,0x60,0x20,
			0x00,0x00,0x00,0x00,0x80,0x80,0xC0,0xE0,0xF0,0x78,0x3E,0x1F,0x0F,0x07,0x01,0x00,
			0x00,0x80,0xE0,0xFC,0xFF,0x7F,0x1F,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x04,0x07,0x07,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x01,
			0x03,0x03,0x03,0x07,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x06,0x07,0x07,0x03,0x01,0x01,0x00,0x00,0x00,0x00,0x02,0x03,0x03,0x03,
			0x03,0x03,0x03,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
			0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00*/

			0x0C,0x06,0x07,0x1E,0xF8,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
					0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
					0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xE0,0x60,0x00,0x00,0x00,0x80,0xE0,0x60,0x00,
					0x00,0x00,0x80,0xC0,0x60,0x60,0xC0,0x00,0x00,0x00,0x00,0x80,0xE0,0x60,0x20,0x20,
					0xA0,0xE0,0x60,0x00,0x80,0xE0,0x60,0x20,0x20,0xA0,0xE0,0x60,0x00,0x00,0x20,0xE0,
					0xC0,0x80,0xC0,0x40,0x20,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
					0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
					0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xF0,0xF8,0x3C,0x0F,0x06,0x0C,0x18,

					0x80,0x80,0x00,0x00,0x00,0x07,0x05,0x04,0x06,0x06,0x06,0x06,0x06,0x66,0xFE,0xBC,
					0x8C,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
					0x00,0x00,0x00,0x00,0x00,0x04,0x07,0x03,0x01,0x01,0x01,0x05,0x07,0x03,0x00,0x04,
					0x06,0x03,0x01,0x01,0x01,0x01,0x07,0x06,0x00,0x00,0x04,0x07,0x03,0x01,0x01,0x01,
					0x01,0x01,0x00,0x04,0x07,0x03,0x01,0x01,0x01,0x01,0x01,0x00,0x00,0x00,0x00,0x04,
					0x07,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
					0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0xFE,
					0xF6,0x66,0x06,0x06,0x06,0x06,0x04,0x04,0x03,0x0F,0x00,0x00,0x40,0x00,0x80,0xA0,

					0x1F,0x1F,0xCC,0x00,0x03,0x11,0x10,0x00,0x00,0x40,0xE0,0x20,0x30,0x38,0x18,0x0F,
					0x0F,0x03,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0xF0,0xB0,0x90,0x90,0x90,0xD0,
					0x70,0x30,0x00,0x00,0xC0,0xF0,0x30,0x00,0x00,0x00,0xC0,0xF0,0xB0,0x90,0x90,0x90,
					0xD0,0xF0,0x30,0x00,0x10,0x10,0xD0,0xF0,0x30,0x10,0x10,0x10,0x00,0x00,0xC0,0xF0,
					0xB0,0x80,0x80,0x80,0xC0,0xF0,0x30,0x00,0x00,0x00,0xC0,0xF0,0x30,0x10,0x10,0x10,
					0x10,0xF0,0xF0,0x00,0x80,0xC0,0xE0,0x70,0xF0,0xF0,0x00,0x00,0x00,0x00,0x10,0x70,
					0xF0,0xC0,0x60,0x30,0x10,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x03,0x07,0x1C,
					0x3C,0x38,0x30,0x20,0x60,0xC0,0x40,0x00,0x00,0x20,0x02,0x12,0x50,0x1F,0x1F,0x3F,

					0xC0,0x80,0x00,0x00,0x00,0x00,0x00,0xC0,0xC0,0xC0,0x87,0xFF,0xFC,0xF0,0x00,0x00,
					0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x03,0x03,0x02,0x02,0x02,0x02,0x03,
					0x01,0x00,0x00,0x02,0x03,0x01,0x00,0x00,0x00,0x02,0x03,0x01,0x00,0x01,0x03,0x03,
					0x02,0x02,0x00,0x00,0x00,0x02,0x03,0x01,0x00,0x00,0x00,0x00,0x00,0x02,0x03,0x01,
					0x00,0x00,0x00,0x02,0x03,0x01,0x00,0x00,0x00,0x02,0x03,0x03,0x02,0x02,0x02,0x02,
					0x03,0x01,0x02,0x03,0x03,0x01,0x01,0x01,0x03,0x03,0x03,0x00,0x00,0x00,0x00,0x02,
					0x03,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
					0x00,0xF0,0xF8,0xFC,0x87,0x83,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0xE0,0x70,

					0x01,0x03,0x03,0x04,0x0C,0x04,0x04,0x07,0x07,0x01,0x03,0x03,0x03,0x03,0x00,0x00,
					0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0xF0,0xF0,0x10,0x00,0x00,0x00,0x00,
					0xC0,0xC0,0xD0,0xB0,0x70,0x60,0x60,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0xC0,
					0xC0,0xC0,0xC0,0xE0,0xE0,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
					0x00,0x00,0x00,0x80,0xE0,0xE0,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
					0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
					0xC0,0xF0,0xF0,0x60,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
					0x00,0x03,0x03,0x03,0x03,0x03,0x1F,0x0C,0x0C,0x04,0x06,0x02,0x03,0x01,0x00,0x00,

					0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
					0x00,0x00,0x00,0x80,0x80,0xC0,0xF0,0xFF,0x7F,0x7F,0x30,0x30,0x38,0x38,0x18,0x18,
					0x1C,0x1C,0x01,0x01,0x00,0x00,0x00,0x80,0x80,0xC0,0xC0,0x60,0xE1,0xE1,0xF1,0x78,
					0x7C,0x6F,0xE7,0xC3,0xC0,0xC0,0xE0,0xFC,0xFE,0x0E,0x02,0x00,0x00,0x00,0x00,0x00,
					0xC0,0xF8,0xFE,0x3F,0x0F,0x01,0x00,0x00,0x00,0x03,0x03,0x03,0x03,0x03,0x03,0x03,
					0x03,0x03,0x03,0x03,0x03,0x00,0x00,0x00,0x00,0x0C,0x0C,0xCC,0xEC,0xFC,0x7C,0x1F,
					0x0F,0x0F,0xCC,0xFC,0xFC,0x3C,0x00,0x02,0x0F,0xFF,0xFF,0xFC,0x00,0x00,0x00,0x00,
					0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

					0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x78,
					0x7E,0xFF,0xE7,0xC3,0xC1,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0x40,0x00,0x00,
					0x00,0x00,0x00,0x00,0x18,0x3E,0x3F,0x37,0x31,0x38,0x1E,0x0F,0x07,0x01,0x00,0x80,
					0xC0,0xE0,0x70,0x3C,0x1E,0x0F,0x07,0x03,0x03,0x07,0x07,0x02,0x00,0x80,0xF0,0xFE,
					0x7F,0x0F,0x01,0x00,0x00,0x08,0x0C,0x1C,0x1C,0x38,0x38,0x30,0x30,0x30,0x30,0x30,
					0x30,0x30,0x00,0x00,0x00,0x40,0xE0,0xF0,0x78,0x1E,0x0F,0x67,0x71,0x70,0x60,0x60,
					0x78,0x3E,0x1F,0x07,0x01,0x00,0x00,0x00,0x00,0x03,0x03,0x03,0x00,0x00,0x00,0x00,
					0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

					0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
					0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
					0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
					0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
					0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
					0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
					0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
					0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00


		};
#if SCROLL
	u8 scrollBuffer[]={
			0x00,
			0x2e,
			0x27,//horizontLR
			0x00,
			0x00,
			0x04,
			0x07,
			0x00,
			0xFF,
			0x2f,
			//0xaf
	};
#endif

u8 RecvBuffer[TEST_BUFFER_SIZE];    /**< Buffer for Receiving Data */


/******************************************************************************/
/**
*
* Main function to call the polled master example.
*
* @param	None.
*
* @return	XST_SUCCESS if successful, XST_FAILURE if unsuccessful.
*
* @note		None.
*
*******************************************************************************/
int main(void)
{
	int Status;

	xil_printf("IIC Master Polled Example Test \r\n");

	/*
	 * Run the Iic polled example in master mode, specify the Device
	 * ID that is specified in xparameters.h.
	 */
	Status = IicPsMasterPolledExample(IIC_DEVICE_ID);
	if (Status != XST_SUCCESS) {
		xil_printf("IIC Master Polled Example Test Failed\r\n");
		return XST_FAILURE;
	}

	xil_printf("Successfully ran IIC Master Polled Example Test\r\n");
	return XST_SUCCESS;
}

/*****************************************************************************/
/**
*
* This function sends data and expects to receive data from slave as modular
* of 64.
*
* This function uses interrupt-driven mode of the device.
*
* @param	DeviceId is the Device ID of the IicPs Device and is the
*		XPAR_<IICPS_instance>_DEVICE_ID value from xparameters.h
*
* @return	XST_SUCCESS if successful, otherwise XST_FAILURE.
*
* @note		None.
*
*******************************************************************************/
int IicPsMasterPolledExample(u16 DeviceId)
{
	int Status;
	XIicPs_Config *Config;
	int Index;

	/*
	 * Initialize the IIC driver so that it's ready to use
	 * Look up the configuration in the config table,
	 * then initialize it.
	 */
	Config = XIicPs_LookupConfig(DeviceId);
	if (NULL == Config) {
		xil_printf("LookupConfig failed\n\r");
		return XST_FAILURE;
	}

	Status = XIicPs_CfgInitialize(&Iic, Config, Config->BaseAddress);
	if (Status != XST_SUCCESS) {
		xil_printf("CfgInitialize failed\n\r");
		return XST_FAILURE;
	}

	/*
	 * Perform a self-test to ensure that the hardware was built correctly.
	 */
	Status = XIicPs_SelfTest(&Iic);
	if (Status != XST_SUCCESS) {
		xil_printf("SelfTest failed\n\r");
		return XST_FAILURE;
	}

	/*
	 * Set the IIC serial clock rate.
	 */
	XIicPs_SetSClk(&Iic, IIC_SCLK_RATE);

	/*
	 * Initialize the send buffer bytes with a pattern to send and the
	 * the receive buffer bytes to zero to allow the receive data to be
	 * verified.
	 */
	//for (Index = 0; Index < TEST_BUFFER_SIZE; Index++) {
		//SendBuffer[Index] = (Index % TEST_BUFFER_SIZE);
		//RecvBuffer[Index] = 0;
	//}


	/*
	 * Send the buffer using the IIC and ignore the number of bytes sent
	 * as the return value since we are using it in interrupt mode.
	 */
	Status = XIicPs_MasterSendPolled(&Iic, SendBuffer,
			(sizeof(SendBuffer)/sizeof(SendBuffer[0])), IIC_SLAVE_ADDR);
	if (Status != XST_SUCCESS) {
		xil_printf("MasterSendPolled failed\n\r");
		return XST_FAILURE;
	}

	usleep(10000);

	Status = XIicPs_MasterSendPolled(&Iic, ramBuffer,
			(sizeof(ramBuffer)/sizeof(ramBuffer[0])), IIC_SLAVE_ADDR);
	if (Status != XST_SUCCESS) {
		xil_printf("MasterSendPolled failed\n\r");
		return XST_FAILURE;
	}
#if SCROLL
	Status = XIicPs_MasterSendPolled(&Iic, scrollBuffer,
			(sizeof(scrollBuffer)/sizeof(scrollBuffer[0])), IIC_SLAVE_ADDR);
	if (Status != XST_SUCCESS) {
		xil_printf("MasterSendPolled failed\n\r");
		return XST_FAILURE;
	}
#endif

	/*
	 * Wait until bus is idle to start another transfer.
	 */
	while (XIicPs_BusIsBusy(&Iic)) {
		/* NOP */
	}

	Status = XIicPs_MasterRecvPolled(&Iic, RecvBuffer,
			  (sizeof(RecvBuffer)/sizeof(RecvBuffer[0])), IIC_SLAVE_ADDR);
	if (Status != XST_SUCCESS) {
		xil_printf("MasterRecvPolled failed\n\r");
		return XST_FAILURE;
	}

	/*
	 * Verify received data is correct.
	 */
	 for(Index = 0; Index < TEST_BUFFER_SIZE; Index ++) {
		 xil_printf("%c\n\r", RecvBuffer[Index]);
		/* Aardvark as slave can only set 64 bytes for output */
		if (RecvBuffer[Index] != Index % 64) {
			xil_printf("DataVerificationFAIL\n\r");
			//return XST_FAILURE;
		}
	}

	return XST_SUCCESS;
}
